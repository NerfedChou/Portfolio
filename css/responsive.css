/* Consolidated responsive rules for the site */

/* Large tablets / small desktops */
@media (max-width: 1024px) {
    .header {
        max-width: 100vw;
        padding: 1rem 2vw 0 2vw;
        align-items: center;
    }
    .hero-content {
        max-width: 90vw;
    }
    .nav {
        gap: 1.2rem;
    }
    .hero-title {
        font-size: 2rem;
    }

}

/* Slightly narrower than large desktop (keeps layout balanced) */
@media (max-width: 980px) {
    .about-grid {
        grid-template-columns: 320px 1fr;
    }
    .about-portrait {
        height: 360px;
    }
}

/* Tablet / mobile landscape */
@media (max-width: 768px) {

    .about-hero-section {
        min-height: 50vh;
        height: 60vh;
    }

    .about-hero-bg {
        /* on narrower screens, center the focal point */
        background-position: center top;
        background-size: cover;
    }

    .about-hero-overlay {
        padding: 1rem 1rem;
        max-width: 92vw;
    }

    .about-hero-title {
        font-size: clamp(1.3rem, 4.5vw, 1.8rem);
        margin-bottom: 0.25rem;
    }

    .about-hero-desc {
        font-size: 0.98rem;
    }

    .header {
        padding: 1.2rem 5vw 0 5vw;
        align-items: center;
    }

    /* Nav becomes an overlay panel on smaller screens */
    .nav {
        display: flex;
        position: absolute;
        top: 70px;
        right: 5vw;
        /* glassy background for mobile overlay */
        background: rgba(255,255,255,0.06);
        -webkit-backdrop-filter: blur(10px) saturate(120%);
        backdrop-filter: blur(10px) saturate(120%);
        flex-direction: column;
        gap: 1rem;
        padding: 1rem 1.2rem;
        border-radius: 12px;
        box-shadow: 0 12px 40px rgba(0,0,0,0.45);
        z-index: 100;
        min-width: 200px;

        /* transition-friendly hiding */
        opacity: 0;
        transform: translateY(-8px) scale(0.995);
        pointer-events: none;
        max-height: 0;
        overflow: hidden;
        transition: opacity 240ms cubic-bezier(.2,.9,.3,1), transform 240ms cubic-bezier(.2,.9,.3,1), max-height 280ms ease;
    }

    .nav.open {
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
        max-height: 420px;
    }

    .hamburger {
        display: flex;
    }

    .hero-title {
        font-size: 1.5rem;
    }
    .hero-subtitle {
        font-size: 1rem;
    }
    .hero-actions {
        flex-direction: column;
        gap: 1rem;
    }
    .hero-section {
        min-height: 400px;
        height: 100vh;
        background-position: center top;
    }

    .about-inner { padding: 1rem; }
    .about-portrait { margin: 0 auto 1rem auto; }

    .typewriter { max-width: 22ch; }

    /* SHOW the left hero quote on small screens as a centered bottom overlay,
       rather than hiding it â€” keep .show for the staged reveal. */
    .about-hero-qt {
        display: block !important;
        left: 50%;
        top: auto;
        bottom: clamp(6vh, 10vh, 14vh);
        transform: translateX(-50%) translateY(0); /* centered horizontally */
        width: min(92vw, 520px);
        max-width: 92vw;
        pointer-events: none; /* enabled only when .show adds visibility */
        opacity: 0;
        z-index: 6;
        transition: opacity 320ms cubic-bezier(.2,.9,.3,1), transform 320ms cubic-bezier(.2,.9,.3,1);
    }

    /* when revealed (js toggles .show), enable interactions and slight lift */
    .about-hero-qt.show {
        pointer-events: auto;
        opacity: 1;
        transform: translateX(-50%) translateY(-4px);
    }

    .hero-title {
        font-size: 1.5rem;
    }
}

/* Narrow phones */
@media (max-width: 720px) {
    .about-card {
        padding: 1rem;
    }
    .about-grid {
        grid-template-columns: 1fr;
    }
    .about-portrait {
        max-width: 280px;
        height: 320px;
        margin-bottom: 1rem;
    }

    /* portrait panel placed and centered on mobile */
    .portrait-panel {
        left: 50%;
        right: auto;
        transform: translate(-50%, 8px);
        width: min(88%, 360px);
    }
    .about-left.active .portrait-panel { transform: translate(-50%, 0); }

    .typewriter { max-width: 16ch; border-right-width: 1.5px; }

    /* Stack profile card vertically on narrow viewports */
    .profile-card .profile-inner {
        flex-direction: column;
        gap: 0.9rem;
        align-items: center;
        text-align: center;
    }
    .profile-card .profile-left {
        width: min(92%, 320px);
        flex-basis: auto;
    }
    .profile-card .profile-right {
        width: 100%;
    }

    /* Make the profile card span the full content width on small screens */
    .profile-card {
        width: 100%;
        max-width: 100%;
        margin: 1rem auto;
        padding-left: 1rem;
        padding-right: 1rem;
        box-sizing: border-box;
    }

    /* Ensure the left photo column fills the card width when stacked */
    .profile-card .profile-left {
        width: 100%;
        max-width: 100%;
        flex-basis: auto;
    }

    /* Make the portrait responsive inside the card */
    .profile-card .profile-photo {
        width: 100%;
        height: auto;
        display: block;
    }

    /* Childhood card responsive: stack images and center text on narrow screens */
    .childhood-inner {
        flex-direction: column;
        align-items: center;
        gap: 0.8rem;
    }
    .child-left,
    .child-right {
        width: min(92%, 360px);
        max-width: 360px;
        flex: none;
    }
    .child-photo {
        height: auto;
        width: 100%;
    }
    .child-middle {
        width: 100%;
        padding: 0 0.6rem;
        text-align: center;
    }

    .about-bottom-hero {
        min-height: 30vh;
        padding: 1.1rem 0;
    }
    .about-bottom-hero-bg::before { height: 14%; }
    .about-bottom-hero-bg::after { height: 42%; }
    .about-bottom-hero-title { font-size: 1.05rem; }
    .about-bottom-hero-sub { font-size: 0.95rem; }
}

/* Small phones */
@media (max-width: 480px) {
    .header {
        padding: 0.7rem 3vw 0 3vw;
        align-items: center;
    }
    .hero-title {
        font-size: 1.05rem;
        line-height: 1.08;
        padding: 0 0.6rem;
    }
    .hero-subtitle {
        font-size: 0.85rem;
    }
    .btn {
        font-size: 0.95rem;
        padding: 0.6em 1.2em;
    }
    .typewriter { max-width: 14ch; border-right-width: 1.2px; }

    .about-hero-section {
        min-height: 45vh;
        height: 52vh;
    }

    .about-hero-overlay {
        padding: 0.85rem 0.9rem;
        border-radius: 10px;
        margin: 0 0.75rem;
    }

    .about-hero-title {
        font-size: 1.35rem;
    }

    .about-hero-desc {
        font-size: 0.9rem;
    }

    .history-heading,
    .about-bottom-hero-title {
        font-size: 0.98rem;
        padding: 0 0.6rem;
    }
}

/* Mid-size screens: tablets in landscape and smaller laptops
   Fixes layout issues between ~720px and 1200px */
@media (min-width: 721px) and (max-width: 1200px) {
    .school-card {
        width: calc(100% - 3rem);
        max-width: 880px;
    }

    /* keep school photo proportionate on medium screens */
    .school-right {
        flex: 0 0 220px;
        max-width: 220px;
    }

    .school-photo {
        height: 160px;
        max-height: 180px;
        object-fit: cover;
    }

    /* Make profile card centered but not too narrow */
    .profile-card {
        width: calc(100% - 3rem);
        max-width: 920px;
        margin-left: auto;
        margin-right: auto;
        padding-left: 1rem;
        padding-right: 1rem;
    }

    /* Keep the about grid readable: fixed portrait column and flexible content */
    .about-grid {
        grid-template-columns: 320px 1fr;
        gap: 1.25rem;
        align-items: start;
    }

    /* Slightly reduce portrait size to avoid pushing content */
    .about-portrait {
        max-width: 320px;
        height: auto;
    }

    /* Constrain hero content so it doesn't overflow on mid screens */
    .hero-content {
        max-width: 720px;
        padding-left: 1rem;
        padding-right: 1rem;
    }

    /* Reduce header padding and nav gaps to avoid wrapping */
    .header {
        padding: 1rem 2vw 0 2vw;
    }
    .nav {
        gap: 1rem;
    }
    .nav-link {
        padding: 0.35rem 0.65rem;
        font-size: 1rem;
    }

    /* Graph / timeline container sizing */
    .graph-container {
        max-width: 980px;
        padding: 1.5rem 1rem;
    }

    /* Make sure hero keeps reasonable height */
    .hero-section {
        min-height: 56vh;
        max-height: 760px;
    }

    /* Ensure centered main line position remains accurate */
    .graph-main-line, .graph-svg {
        /* no change to left = 50% but ensure transform is present */
        left: 50%;
        transform: translateX(-50%);
    }

    .about-bottom-hero { min-height: 36vh; padding: 1.6rem 0; }
    .about-bottom-hero-title { font-size: 1.4rem; }
}

/* Ensure school card stacks and does not overflow on small screens */
@media (max-width: 720px) {
    .school-card {
        width: 100%;
        max-width: 100%;
        margin: 1rem auto;
        padding-left: 1rem;
        padding-right: 1rem;
        box-sizing: border-box;
    }
    .school-inner {
        flex-direction: column;
        gap: 0.9rem;
        align-items: center;
        text-align: center;
    }
    .school-left {
        width: 100%;
    }
    .school-right {
        width: 100%;
        max-width: 100%;
        flex-basis: auto;
        display: block;
    }
    .school-photo {
        width: 100%;
        height: auto;
        max-height: none;
        object-fit: cover;
        display: block;
    }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    .typewriter { border-right: 0; }
    .hero-title, .hero-subtitle, .hero-actions, .logo, .nav, .hamburger, .header {
        transition: none !important;
        animation: none !important;
    }
    .glassy.glassy-active::after { animation: none; opacity: 0.12; left: 0; }
    .skill-detail, .skill, .portrait-panel { transition: none !important; transform: none !important; }
}

/* Utilities responsive helpers */

/* Force any media-like block to stack on small viewports */
@media (max-width: 720px) {
    .media, .profile-card .profile-inner, .school-inner, .childhood-inner, .desktop-inner {
        flex-direction: column;
        gap: 0.9rem;
        align-items: center;
        text-align: center;
    }
    /* ensure card containers use full available width on mobile */
    .u-card, .about-card, .profile-card, .school-card, .childhood-card, .desktop-card {
        width: 100%;
        max-width: 100%;
        margin: 1rem auto;
        padding-left: 1rem;
        padding-right: 1rem;
        box-sizing: border-box;
    }
    /* image helpers adjust on mobile */
    .media__figure, .profile-card .profile-left, .school-right, .child-left, .child-right, .desktop-left {
        width: min(92%, 360px);
        max-width: 360px;
        flex-basis: auto;
    }
    .u-img, .u-img--contain, .profile-photo, .school-photo, .child-photo, .desktop-photo {
        width: 100%;
        height: auto;
        max-height: none;
        object-fit: cover;
    }
}

/* Mid-size screens (keep consistent card sizing) */
@media (min-width: 721px) and (max-width: 1200px) {
    /* give childhood side images more room on mid screens */
    .child-left, .child-right { flex: 0 0 240px; max-width: 240px; }
    .child-photo {
        height: 240px;
        max-height: 420px;
        object-fit: cover;
    }

    /* keep other mid-size rules unchanged */
    .u-maxwidth { max-width: 920px; width: calc(100% - 3rem); }
    .profile-card .profile-left { flex: 0 0 300px; max-width: 300px; }
    .school-right { flex: 0 0 260px; max-width: 260px; }
}

/* Large screens: give the childhood images a bit more room */
@media (min-width: 1201px) {
    .child-left, .child-right {
        flex: 0 0 320px;    /* larger column on wide viewports */
        max-width: 320px;
    }
    .child-photo {
        height: 320px;
        max-height: 640px;
        object-fit: cover;
    }
}

/* Footer responsive: stack content and center */
@media (max-width: 720px) {
    .footer-inner {
        flex-direction: column;
        gap: 0.6rem;
        align-items: center;
        text-align: center;
    }
    .footer-nav { gap: 0.5rem; flex-wrap: wrap; }
    .footer-nav a { padding: 0.4rem 0.6rem; }
    .footer-legal { order: 3; }
    .footer-brand { order: 1; }
}

/* Mobile: stack childhood block vertically (description first, then photos stacked) */
@media (max-width: 720px) {
    .childhood-inner {
        display: flex !important;
        flex-direction: column;
        gap: 0.8rem;
        align-items: center;
        text-align: center;
    }

    .child-middle {
        width: 100%;
        grid-column: auto;
        grid-row: auto;
        padding: 0 0.6rem;
        text-align: center;
    }

    .child-left,
    .child-right {
        width: min(92%, 360px);
        max-width: 360px;
        flex: none;
    }

    .child-photo {
        width: 100%;
        height: auto;
        max-height: none;
        object-fit: cover;
    }
    .profile-right cite{
        justify-content: center;
    }
}
